version: '3.8'

services:
  favourites_service:
    build:
      context: ../favouritesService/
      dockerfile: ../dockerCompose/favouritesDocker/Dockerfile
    ports:
      - '10000:8080'

  shoppingcart_service:
    build:
      context: ../shoppingCartService/
      dockerfile: ../dockerCompose/shoppingCartDocker/Dockerfile
    ports:
      - '10001:8080'

  login_service:
    build:
      context: ../loginService/
      dockerfile: ../dockerCompose/loginDocker/Dockerfile
    ports:
      - '10002:8080'
    depends_on:
      - mongodb
    environment:
      - spring_data_mongodb_authentication_database=admin
      - spring_data_mongodb_database=mydatabase
      - spring_data_mongodb_port=27017
      - spring_data_mongodb_host=mongodb
      - spring_data_mongodb_auto-index-creation=true
      #- spring_data_mongodb_username=root
      #- spring_data_mongodb_password=root


  mongodb:
    image: mongo
    container_name: "mongodb"
    ports:
      - 27017:27017
    volumes:
    - data:/data
    environment:
      - ME_CONFIG_MONGODB_ADMINUSERNAME=root
      - ME_CONFIG_MONGODB_ADMINPASSWORD=root

# panel admina idk czemu nie dzia≈Ça pewnie wina WSL2 :(
#  login_db_express:
#    image: mongo-express
#    ports:
#       - 8081:8081
#    container_name: "login_db_express"
#    environment:
#      - ME_CONFIG_MONGODB_SERVER=mongodb
#      - ME_CONFIG_MONGODB_PORT=27017
#      - ME_CONFIG_MONGODB_AUTH_DATABASE=admin
#      - ME_CONFIG_MONGODB_ADMINUSERNAME=root
#      - ME_CONFIG_MONGODB_ADMINPASSWORD=root
#    depends_on:
#      - mongodb

#  products_service:
#    build: productsDocker/
#    ports:
#      - '10003:8080'
  front:
    build:
      context: ../frontend
      dockerfile: ../dockerCompose/frontDocker/Dockerfile
    ports:
      - '44444:8080'

volumes:
  data: {}

